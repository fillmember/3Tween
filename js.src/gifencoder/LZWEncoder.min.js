LZWEncoder=function(){var E={};var p=-1;var I;var g;var m;var n;var e;var f;var o=12;var C=5003;var B;var q=o;var v;var H=1<<o;var u=[];var s=[];var z=C;
var G=0;var x=false;var j;var b;var A;var J=0;var F=0;var t=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var d;var l=[];var w=E.LZWEncoder=function w(N,L,O,M){I=N;
g=L;m=O;n=Math.max(2,M);};var y=function y(M,L){l[d++]=M;if(d>=254){a(L);}};var k=function k(L){D(z);G=b+2;x=true;r(b,L);};var D=function D(L){for(var M=0;
M<L;++M){u[M]=-1;}};var K=E.compress=function K(S,M){var O;var P;var R;var Q;var T;var N;var L;j=S;x=false;B=j;v=c(B);b=1<<(S-1);A=b+1;G=b+2;d=0;Q=i();
L=0;for(O=z;O<65536;O*=2){++L;}L=8-L;N=z;D(N);r(b,M);outer_loop:while((R=i())!=p){O=(R<<q)+Q;P=(R<<L)^Q;if(u[P]==O){Q=s[P];continue;}else{if(u[P]>=0){T=N-P;
if(P===0){T=1;}do{if((P-=T)<0){P+=N;}if(u[P]==O){Q=s[P];continue outer_loop;}}while(u[P]>=0);}}r(Q,M);Q=R;if(G<H){s[P]=G++;u[P]=O;}else{k(M);}}r(Q,M);r(A,M);
};var h=E.encode=function h(L){L.writeByte(n);e=I*g;f=0;K(n+1,L);L.writeByte(0);};var a=function a(L){if(d>0){L.writeByte(d);L.writeBytes(l,0,d);d=0;}};
var c=function c(L){return(1<<L)-1;};var i=function i(){if(e===0){return p;}--e;var L=m[f++];return L&255;};var r=function r(L,M){J&=t[F];if(F>0){J|=(L<<F);
}else{J=L;}F+=B;while(F>=8){y((J&255),M);J>>=8;F-=8;}if(G>v||x){if(x){v=c(B=j);x=false;}else{++B;if(B==q){v=H;}else{v=c(B);}}}if(L==A){while(F>0){y((J&255),M);
J>>=8;F-=8;}a(M);}};w.apply(this,arguments);return E;};