GIFEncoder=function(){for(var U=0,v={};U<256;U++){v[U]=String.fromCharCode(U);}function T(){this.bin=[];}T.prototype.getData=function(){for(var ab="",aa=this.bin.length,ac=0;
ac<aa;ac++){ab+=v[this.bin[ac]];}return ab;};T.prototype.writeByte=function(i){this.bin.push(i);};T.prototype.writeUTFBytes=function(ab){for(var aa=ab.length,ac=0;
ac<aa;ac++){this.writeByte(ab.charCodeAt(ac));}};T.prototype.writeBytes=function(ae,ad,ac){for(var aa=ac||ae.length,ab=ad||0;ab<aa;ab++){this.writeByte(ae[ab]);
}};var S={};var a;var d;var P=null;var n;var E=-1;var H=0;var Z=false;var K;var h;var j;var y;var s;var O;var f=[];var Q=7;var A=-1;var F=false;var M=true;
var L=false;var o=10;var G="Generated by jsgif (https://github.com/antimatter15/jsgif/)";var C=S.setDelay=function C(i){H=Math.round(i/10);};var w=S.setDispose=function w(i){if(i>=0){A=i;
}};var q=S.setRepeat=function q(i){if(i>=0){E=i;}};var b=S.setTransparent=function b(i){P=i;};var B=S.setComment=function B(i){G=i;};var l=S.addFrame=function l(aa,i){if((aa===null)||!Z||K===null){throw new Error("Please call start method before calling addFrame");
}var ab=true;try{if(!i){h=aa.getImageData(0,0,aa.canvas.width,aa.canvas.height).data;if(!L){J(aa.canvas.width,aa.canvas.height);}}else{h=aa;}k();e();if(M){W();
R();if(E>=0){D();}}u();if(G!==""){x();}X();if(!M){R();}t();M=false;}catch(ac){ab=false;}return ab;};var p=S.finish=function p(){if(!Z){return false;}var i=true;
Z=false;try{K.writeByte(59);}catch(aa){i=false;}return i;};var N=function N(){n=0;h=null;j=null;y=null;O=null;F=false;M=true;};var m=S.setFrameRate=function m(i){if(i!=15){H=Math.round(100/i);
}};var g=S.setQuality=function g(i){if(i<1){i=1;}o=i;};var J=S.setSize=function J(i,aa){if(Z&&!M){return;}a=i;d=aa;if(a<1){a=320;}if(d<1){d=240;}L=true;
};var z=S.start=function z(){N();var i=true;F=false;K=new T();try{K.writeUTFBytes("GIF89a");}catch(aa){i=false;}return Z=i;};var I=S.cont=function I(){N();
var i=true;F=false;K=new T();return Z=i;};var e=function e(){var aa=j.length;var i=aa/3;y=[];var ae=new NeuQuant(j,aa,o);O=ae.process();var ab=0;for(var ad=0;
ad<i;ad++){var ac=ae.map(j[ab++]&255,j[ab++]&255,j[ab++]&255);f[ac]=true;y[ad]=ac;}j=null;s=8;Q=7;if(P!==null){n=r(P);}};var r=function r(aj){if(O===null){return -1;
}var aa=(aj&16711680)>>16;var af=(aj&65280)>>8;var al=(aj&255);var ad=0;var ac=256*256*256;var ah=O.length;for(var ae=0;ae<ah;){var ab=aa-(O[ae++]&255);
var ak=af-(O[ae++]&255);var am=al-(O[ae]&255);var ai=ab*ab+ak*ak+am*am;var ag=ae/3;if(f[ag]&&(ai<ac)){ac=ai;ad=ag;}ae++;}return ad;};var k=function k(){var ab=a;
var ae=d;j=[];var ag=h;var af=0;for(var ad=0;ad<ae;ad++){for(var ac=0;ac<ab;ac++){var aa=(ad*ab*4)+ac*4;j[af++]=ag[aa];j[af++]=ag[aa+1];j[af++]=ag[aa+2];
}}};var u=function u(){K.writeByte(33);K.writeByte(249);K.writeByte(4);var i;var aa;if(P===null){i=0;aa=0;}else{i=1;aa=2;}if(A>=0){aa=A&7;}aa<<=2;K.writeByte(0|aa|0|i);
Y(H);K.writeByte(n);K.writeByte(0);};var x=function x(){K.writeByte(33);K.writeByte(254);K.writeByte(G.length);K.writeUTFBytes(G);K.writeByte(0);};var X=function X(){K.writeByte(44);
Y(0);Y(0);Y(a);Y(d);if(M){K.writeByte(0);}else{K.writeByte(128|0|0|0|Q);}};var W=function W(){Y(a);Y(d);K.writeByte((128|112|0|Q));K.writeByte(0);K.writeByte(0);
};var D=function D(){K.writeByte(33);K.writeByte(255);K.writeByte(11);K.writeUTFBytes("NETSCAPE2.0");K.writeByte(3);K.writeByte(1);Y(E);K.writeByte(0);
};var R=function R(){K.writeBytes(O);var ab=(3*256)-O.length;for(var aa=0;aa<ab;aa++){K.writeByte(0);}};var Y=function Y(i){K.writeByte(i&255);K.writeByte((i>>8)&255);
};var t=function t(){var i=new LZWEncoder(a,d,y,s);i.encode(K);};var V=S.stream=function V(){return K;};var c=S.setProperties=function c(i,aa){Z=i;M=aa;
};return S;};